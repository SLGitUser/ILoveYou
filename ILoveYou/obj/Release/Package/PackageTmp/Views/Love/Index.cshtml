@model List<ILoveYou.Models.Message>
@{
    Layout = "";
    ViewBag.Title = "My Friend";
}

<link rel="shortcut icon" href="/Content/images/WebICON.png" type="image/x-icon">
<title>趣聊网</title>
@* ReSharper disable once UnknownCssVendorExtension *@
<style type="text/css">
    * {
        font-family: "黑体";
        padding: 0;
        margin: 0;
    }

    body {
        width: 100%;
        /*height: 100%;*/
        margin: auto;
        /*background-image: url("/Content/images/backimg2.gif");*/
        background-image: url("/Content/images/backimg3.jpg");
        background-size: 100% 100%;
        padding-top: 0px;
    }
    .top_left_name {
        display: inline-block; 
        font-size: 30px; 
        padding: 10px 10px 10px 20px; 
        color: white;
        font-weight: bold;
    }
    .name {
        font-size: 144px;
        color: white;
        text-align: center;
        line-height: 200px;
        text-shadow: 2px 3px 2px #daa520;
    }

    .content {
        font-size: 54px;
        color: white;
        text-align: center;
        line-height: 150px;
        text-shadow: 2px 3px 2px #daa520;
    }

    #music {
        width: 100%;
        bottom: 4px;
        position: absolute;
    }

    .zhufu {
        font-size: 40px;
        color: #959;
        text-align: center;
        line-height: 50px;
        text-shadow: 2px 3px 2px #f5fffa;
    }

    .boxContent {
        position: fixed;
        width: 550px;
        height: 500px;
        left: 30%;
        top: 15%;
        background-color: khaki;
        border: 2px solid crimson;
        display: none;
        z-index: 1000;
    }

    .title {
        text-align: left;
        font-size: 15px;
        color: crimson;
        font-weight: bold;
        width: 97.8%;
        height: 5%;
        position: relative;
        padding: 5px;
        background-color: white;
        border-bottom: 2px solid black;
        margin-bottom: 5px;
    }

    .close {
        position: absolute;
        right: 0px;
        top: 0px;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        font-size: 14px;
        width: 10%;
        display: block;
        padding: 5px 10px;
        width: auto;
        color: chocolate;
    }

        .close:hover {
            color: red;
            cursor: pointer;
        }

    .contentDiv {
        width: 90%;
        height: 50%;
        margin: auto;
    }

    .area {
        width: 100%;
        height: 100%;
        padding: 5px;
        background-color: antiquewhite;
        font-size: 14px;
        border-color: crimson;
        color: deeppink;
    }

    .textBox {
        background-color: khaki;
        border: none;
        border-bottom: 1px solid black;
        margin-bottom: 5px;
        color: deeppink;
    }

    #Ok {
        margin: auto;
        display: block;
        position: absolute;
        border-color: blueviolet;
        font-weight: bold;
        padding: 3px 10px;
        bottom: 5px;
        left: 43%;
    }

    #GX {
        margin: auto;
        text-align: center;
        display: block;
        position: fixed;
        z-index: 1000;
        width: 20px;
        height: 100px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 15px;
        color: darkred;
        padding: 10px;
        left: 0;
        bottom: 15px;
        line-height: 20px;
        border: 2px solid white;
        background-color: blanchedalmond;
        cursor: pointer;
        font-weight: bold;
        -ms-opacity: .2;
        opacity: .2;
    }

        #GX:hover {
            background-color: white;
            color: crimson;
            border: 2px solid crimson;
            -ms-opacity: 1;
            opacity: 1;
        }

    #HideMax {
        margin: auto;
        text-align: center;
        display: block;
        position: fixed;
        z-index: 55;
        width: 20px;
        height: 120px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 15px;
        color: darkred;
        padding: 10px;
        right: 0;
        bottom: 15px;
        line-height: 20px;
        border: 2px solid white;
        background-color: blanchedalmond;
        cursor: pointer;
        font-weight: bold;
        z-index: 1000;
        -ms-opacity: .2;
        opacity: .2;
    }

        #HideMax:hover {
            background-color: white;
            color: crimson;
            border: 2px solid crimson;
            -ms-opacity: 1;
            opacity: 1;
        }

    #HideTag {
        margin: auto;
        text-align: center;
        display: block;
        position: fixed;
        z-index: 55;
        width: 20px;
        height: 120px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 15px;
        color: darkred;
        padding: 10px;
        right: 0;
        bottom: 160px;
        line-height: 20px;
        border: 2px solid white;
        background-color: blanchedalmond;
        cursor: pointer;
        font-weight: bold;
        z-index: 900;
        -ms-opacity: .2;
        opacity: .2;
    }

        #HideTag:hover {
            background-color: white;
            color: crimson;
            border: 2px solid crimson;
            -ms-opacity: 1;
            opacity: 1;
        }
        
    #RatrunHome {
        margin: auto;
        text-align: center;
        display: block;
        position: fixed;
        z-index: 55;
        width: 20px;
        height: 40px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 15px;
        color: darkred;
        padding: 10px;
        right: -5px;
        bottom: 10px;
        line-height: 20px;
        border: 2px solid white;
        background-color: blanchedalmond;
        cursor: pointer;
        font-weight: bold;
        z-index: 1000;
        /*-ms-opacity: .2;
        opacity: .2;*/
        border-radius: 10%;
        display: none;
    }

        #RatrunHome:hover {
            background-color: white;
            color: crimson;
            border: 2px solid crimson;
            -ms-opacity: 1;
            opacity: 1;
        }
    .tag {
        background: url(/Content/images/tagBack.jpg) no-repeat;
        -ms-background-size: 250px 200px;
        background-size: 250px 200px;
        width: 250px;
        height: 200px;
        margin: 10px;
        border: 2px #ffd700 solid;
        -ms-border-radius: 5px;
        border-radius: 5px;
        float: left;
        -ms-opacity: .8;
        opacity: .8;
    }

        .tag:hover {
            border: 2px #87ceeb solid;
            -ms-opacity: 1;
            opacity: 1;
        }

        .tag .tagTitle {
            padding: 5px 5px;
            border-bottom: 1px double #ffd700;
            height: 10%;
            color: #9400d3;
            font-weight: bold;
        }

        .tag .tagContent {
            height: 65%;
            padding: 5px;
            color: #8b0000;
            font-size: 14px;
        }

        .tag .tagfoot {
            padding: 5px 5px;
            border-top: 1px dotted #ffd700;
            height: 10%;
            font-weight: bold;
        }

            .tag .tagfoot .tagLeft {
                color: #0000ff;
            }

            .tag .tagfoot .tagRight {
                color: #0000ff;
            }

    .middle {
        position: fixed;
        width: 100%;
        height: 100%;
        z-index: 900;
    }
    .footerClass {
        position:absolute; 
        bottom: 0; width: 100%; 
        font-family: '黑体';
        color: #959595;
        font-size: 15px;
        background-color: rgba(0, 0, 0, .2);
        /*background-color: white;*/
        padding: 10px 0;
    }
    #qqLoginBtn {
        float: right;
        padding:5px 15px 5px 0px
    }
</style>
<script src="~/Scripts/jquery-1.10.2.js"></script>

<script type="text/javascript">

    $(function() {
        $(".tag").each(function(i, v) {
            $(v).fadeIn(1000);
        });
        $(".tag").click(function() {
            var tagTitle = $(this).find(".tagTitle").html();
            var tagContent = $(this).find(".tagContent").html();
            var tagReceiver = $(this).find(".tagLeft").html();
            var tagBackImg = $(this).css("background-image");

            $("body").css("background-image", tagBackImg).html();
            $(".name").html(tagTitle);
            $(".content").html(tagReceiver);
            $(".zhufu").html(tagContent);
            $('.middle').fadeIn();
            $('#RatrunHome').fadeIn();
            $('#tagBox').fadeOut();
            // autoplay="autoplay"
            var tagMusic = $(this).find(".tagMusic").val();
            var tagMusicUrl = tagMusic == null || tagMusic == "" ? "/Content/music/樊凡 - 守护 - 小爸爸 电视原声带.mp3" : tagMusic;
            if ($("#music").attr("src") !== tagMusicUrl) {
                $("#medio").html('\
        <audio controls="controls" src="' + tagMusicUrl + '" id="music" autoplay="autoplay">\
            <source type="audio/mp3" media="true" />\
        </audio>');
            }
        });
        //上传时的动画
        var imgWidth = parseInt($("#UploadingImg").css("width"));
        var imgHeight = parseInt($("#UploadingImg").css("Height"));
        var formWidth = parseInt($("body").css("width"));
        var formHeight = parseInt($("body").css("Height"));
        console.info((formWidth / 2 - imgWidth / 2) + "px");
        $("#UploadingImg").css("left", (formWidth / 2 - imgWidth / 2) + "px");
        $("#UploadingImg").css("top", (formHeight / 2 - imgHeight / 2) + "px");

    });
    //点击QQ登录时触发
    function ClickQQLogin() {
        $.ajax({
            url: "/Love/ClickQq",
            type: "get"
        });
    }
</script>
<div id="topIcon" style="width:100%; background-color: rgba(0, 0, 0, .2); ">
    <img class="top_left_img" src="/Content/images/WebICON3.png" style="float: left;padding: 0px 10px 15px 30px;" width="150" height="50" alt="趣聊网" /><span class="top_left_name">趣聊网</span>
    <span id="qqLoginBtn"><img src="/Content/images/Connect_logo_5.png" onclick="ClickQQLogin()"></span>
</div>
<div id="tagBox" style="margin: auto;width: 92%">
@foreach (var item in Model)
{
    <div class="tag" style="display: none;background-image:url(@(item.BackImg??"/Content/images/tagBack.jpg"))">
        <div class="tagTitle">@item.Title</div>
        <div class="tagContent">@item.Content</div>
        <input class="tagMusic" type="hidden" value="@item.BackMusic" />
        <div class="tagfoot">
            <span style="float: left" class="tagLeft">送给：@(item.Receiver??"匿名")</span><span style="float: right" class="tagRight">来自：@(item.Sender ?? "匿名")</span>
        </div>
    </div>
}
</div>
<div class="middle" style="display: none">
    <p class="name"></p>
    <p class="content"></p>
    <p class="zhufu"></p>
    <div id="medio">
        <audio controls="controls" id="music">
            <source type="audio/mp3" src="" media="true" />
        </audio>
    </div>
</div>
<div id="GX" onselectstart="return false" onclick="$('.boxContent').fadeIn()">我要对TA说</div>
@*<div id="HideMax" onselectstart="return false" onclick="$('.middle').fadeToggle()">文字显示切换</div>
<div id="HideTag" onselectstart="return false" onclick="$('.tag').fadeToggle()">标签显示切换</div>*@
<div id="RatrunHome" onselectstart="return false" onclick="$('#tagBox').fadeIn(); $('.middle').fadeOut();">返回</div>
@*<input type="button" name="ganxie" value="我要对他说" id="GX" onclick="$('.boxContent').fadeIn()" />*@
@using (Html.BeginForm("SaveText", "Love", FormMethod.Post, new { @enctype = "multipart/form-data" }))
{
    <div class="boxContent">
        <div class="title"><div style="float:left;width:100%">写出一句祝福的话语</div><div class="close" onclick="$('.boxContent').fadeOut()">X</div></div>
        <div class="contentDiv">
            <div class="contentText">
                <label>TA的姓名：</label>
                <input type="text" name="Receiver" value="" class="textBox" /><br />
                <label>标&nbsp;&nbsp;&nbsp;&nbsp;题：</label>
                <input type="text" name="Title" value="" class="textBox" />
                <br />
                <label style="line-height:15px;display:block;margin-bottom:4px;">内&nbsp;&nbsp;&nbsp;&nbsp;容：</label>
                <textarea class="area" name="Content"></textarea><br />
                <label>背&nbsp;&nbsp;&nbsp;&nbsp;景：</label>
                <input type="file" style="margin: 5px 0;" name="BackImg" accept="image/jpeg,image/gif,image/png" /><br />
                <label>音&nbsp;&nbsp;&nbsp;&nbsp;乐：</label>
                <input type="file" name="BackMusic" accept="audio/mpeg" /><br />
                <label>ME的姓名：</label>
                <input type="text" name="Sender" value="" class="textBox" />
            </div>
        </div>
        <input type="submit" name="ok" value="送给TA" id="Ok" onclick="$('#UploadingDiv').css('display', 'block');" />
    </div>
}
<div id="UploadingDiv" style="height: 100%; width: 100%; position: fixed; background-color: rgba(70, 68, 68, 0.5); display: none; z-index: 1100">
    <img id="UploadingImg" src="/Content/images/Uploading.gif" style="position: absolute;" alt="正在发布......"/>
</div>
<footer class="footerClass">
    <div style="text-align: center;">
        <div style="text-align: center">版权所有&copy;草根项目组&nbsp;&nbsp;&nbsp;&nbsp;&copy;冀ICP备16023252号</div>
    </div>
</footer>